(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e890608"],{"106b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("el-card",{staticClass:"search-card"},[a("el-form",{staticClass:"search-form-inline",attrs:{inline:!0,model:e.searchModel}},[a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{attrs:{placeholder:"名称",clearable:""},model:{value:e.searchModel.permissionName,callback:function(t){e.$set(e.searchModel,"permissionName",t)},expression:"searchModel.permissionName"}})],1),a("el-form-item",{attrs:{label:"终端类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchModel.clientCategory,callback:function(t){e.$set(e.searchModel,"clientCategory",t)},expression:"searchModel.clientCategory"}},e._l(e.searchModel.clientCategorys,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})))],1),a("el-form-item",{attrs:{label:"数据状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchModel.dataState,callback:function(t){e.$set(e.searchModel,"dataState",t)},expression:"searchModel.dataState"}},e._l(e.searchModel.dataStates,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})))],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1)],1)],1),a("el-container",[a("el-aside",[a("el-card",{staticClass:"tree-card"},[a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.trees,props:e.treeProps,"default-expand-all":"","expand-on-click-node":!1,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)],1),a("el-main",[a("el-card",{staticClass:"operation-card"},[a("el-breadcrumb",{attrs:{separator:"/"}},e._l(e.paths,(function(t,n){return a("el-breadcrumb-item",{key:n,nativeOn:{click:function(a){a.preventDefault(),e.onLinkObjectData(t.permissionId)}}},[a("a",{attrs:{href:"#"}},[e._v(e._s(t.permissionName))])])}))),a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.add}},[e._v("添加")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.mod}},[e._v("修改")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.del}},[e._v("删除")])],1)],1),a("el-card",{staticClass:"table-card"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.datas,"max-height":"424",stripe:"","default-sort":{prop:"permissionId",order:"descending"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"permissionId",label:"权限编号",width:"200",sortable:""}}),a("el-table-column",{attrs:{prop:"permissionName",label:"权限名称","show-overflow-tooltip":"",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.getObjectDataById(t.row)}}},[e._v(e._s(t.row.permissionName))])]}}])}),a("el-table-column",{attrs:{prop:"clientCategory",label:"终端类别",width:"120",sortable:""}}),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"120",sortable:""}}),a("el-table-column",{attrs:{prop:"dataState",label:"数据状态",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(t.row.dataState)}})]}}])})],1)],1),a("el-card",{staticClass:"pagination-card"},[a("el-pagination",{attrs:{"current-page":e.pagingModel.currentPage,"page-sizes":e.pagingModel.pageSizes,"page-size":e.pagingModel.pageSize,"pager-count":e.pagingModel.pagerCount,layout:"total, sizes, prev, pager, next, jumper",total:e.pagingModel.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),a("el-dialog",{attrs:{title:"权限信息",visible:e.addOrModDialogFormVisible},on:{"update:visible":function(t){e.addOrModDialogFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{inline:!1,model:e.entityModel,rules:e.rules,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"权限编号",prop:"permissionId"}},[a("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"编号",autocomplete:"off",clearable:""},model:{value:e.entityModel.permissionId,callback:function(t){e.$set(e.entityModel,"permissionId",t)},expression:"entityModel.permissionId"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"权限名称",prop:"permissionName"}},[a("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"名称",autocomplete:"off",clearable:""},model:{value:e.entityModel.permissionName,callback:function(t){e.$set(e.entityModel,"permissionName",t)},expression:"entityModel.permissionName"}})],1)],1)],1),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"终端类别"}},[a("el-select",{staticStyle:{width:"260px"},attrs:{placeholder:"请选择"},model:{value:e.entityModel.clientCategory,callback:function(t){e.$set(e.entityModel,"clientCategory",t)},expression:"entityModel.clientCategory"}},e._l(e.entityModel.clientCategorys,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})))],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属权限"}},[a("el-cascader",{staticStyle:{width:"260px"},attrs:{options:e.nodes,filterable:"",clearable:!0,props:e.nodeProps},on:{change:e.handleItemChange},model:{value:e.entityModel.ids,callback:function(t){e.$set(e.entityModel,"ids",t)},expression:"entityModel.ids"}})],1)],1)],1),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"权限排序"}},[a("el-input-number",{staticStyle:{width:"260px"},attrs:{min:1,label:""},model:{value:e.entityModel.sort,callback:function(t){e.$set(e.entityModel,"sort",t)},expression:"entityModel.sort"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"权限状态"}},[a("el-select",{staticStyle:{width:"260px"},attrs:{placeholder:"请选择"},model:{value:e.entityModel.dataState,callback:function(t){e.$set(e.entityModel,"dataState",t)},expression:"entityModel.dataState"}},e._l(e.entityModel.dataStates,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})))],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addOrModDialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{on:{click:function(t){e.resetForm("editForm")}}},[e._v("重置")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sava("editForm")}}},[e._v("确 定")])],1)],1)],1)},o=[],i=(a("ac6a"),a("cc86")),s=a("8206"),l=a("806d"),r={name:"PermissionTemplate",data:function(){return{pagingModel:s["a"],searchModel:{parentId:null,permissionName:"",dataState:0,clientCategory:0,dataStates:[],clientCategorys:[]},entityModel:{permissionId:"",parentId:null,ids:[],permissionName:"",sort:0,dataState:0,clientCategory:0,dataStates:[],clientCategorys:[]},rules:{permissionName:[{required:!0,message:"请输入名称",trigger:"blur"}]},treeProps:{id:"permissionId",label:"permissionName",children:"children"},nodeProps:{value:"permissionId",label:"permissionName",children:"children",disabled:"disabled",expandTrigger:"hover",checkStrictly:"false"},trees:[],nodes:[],datas:[],paths:[],multipleSelection:[],inputIsDisabled:!1,addOrModDialogFormVisible:!1,filterText:"",isEdit:!1}},components:{},created:function(){this.getPage(),this.getPath(),this.getTree(),this.getNode(),this.getDataState(),this.getClientCategory()},mounted:function(){},computed:{},methods:{add:function(){this.entityModel.permissionId="",this.entityModel.parentId=null,this.entityModel.ids=[],this.entityModel.permissionName="",this.entityModel.sort=0,this.entityModel.clientCategory=1,this.entityModel.dataState=1,this.addOrModDialogFormVisible=!0,this.isEdit=!1},mod:function(){var e=this,t=this.getIds();0===t.length||t.length>1?this.$message({type:"info",message:"请选择一条数据修改"}):this.$axios({method:"get",url:l["h"].getInfo,params:{id:t[0]}}).then((function(t){e.entityModel=t.data.data,e.isEdit=!0,e.addOrModDialogFormVisible=!0}))},del:function(){var e=this,t=this,a=t.getIds();0!==a.length?this.$confirm("确认删除该数据吗, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios({method:"delete",url:l["h"].delInfo,data:a}).then((function(e){1===e.data.resultState?t.$message({showClose:!0,message:"提示，删除成功",type:"success",duration:1e3,onClose:function(){t.getPage()}}):t.$message({type:"info",message:"删除失败！"+e.data.message})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})})):this.$message({type:"info",message:"请至少选择一条数据删除"})},getClientCategory:function(){var e=this;e.$axios({method:"get",url:l["e"].getClientCategory}).then((function(t){e.searchModel.clientCategorys=t.data,e.searchModel.clientCategory=t.data[0].value}))},getDataState:function(){var e=this;e.$axios({method:"get",url:l["e"].getDataState}).then((function(t){e.searchModel.dataStates=t.data,e.searchModel.dataState=t.data[0].value}))},getTree:function(){var e=this;e.$axios({method:"post",url:l["h"].getTree,params:{parentId:null}}).then((function(t){e.trees=t.data}))},getNode:function(){var e=this;e.$axios({method:"post",url:l["h"].getNode,params:{parentId:null}}).then((function(t){e.nodes=t.data}))},getPath:function(){var e=this;e.$axios({method:"post",url:l["h"].getPath,params:{id:e.searchModel.parentId}}).then((function(t){e.paths=t.data}))},getPage:function(){var e=this,t={pageIndex:this.pagingModel.currentPage,pageSize:this.pagingModel.pageSize,parentId:this.searchModel.parentId,permissionName:this.searchModel.permissionName};e.$axios({method:"post",url:l["h"].getPage,data:t}).then((function(t){var a=t.data;null!=a.datas?a.datas.forEach((function(e){switch(null!==e.createTime?e.createTime=Object(i["a"])(e.createTime):e.createTime=null,null!==e.modifyTime?e.modifyTime=Object(i["a"])(e.modifyTime):e.modifyTime=null,e.dataState){case 1:e.dataState='<span style="color:green;">启用</span>';break;case 2:e.dataState='<span style="color:gray;">停用</span>';break;default:}})):a.datas=[],e.datas=a.datas,e.pagingModel.total=a.total}))},getIds:function(){var e=this.multipleSelection,t=[];return e.map((function(e){t.push(e.permissionId)})),t},handleSizeChange:function(e){this.pagingModel.pageSize=e},handleCurrentChange:function(e){this.pagingModel.currentPage=e},sava:function(e){var t=this.entityModel.ids,a=t[t.length-1];a!==this.entityModel.permissionId&&(this.entityModel.parentId=a);var n=this,o="",i="";this.isEdit?(o=l["h"].modInfo,i="put"):(o=l["h"].addInfo,i="post"),this.$refs[e].validate((function(e){if(!e)return!1;n.$axios({method:i,url:o,data:n.entityModel}).then((function(e){1===e.data.resultState?n.$message({showClose:!0,message:"提示，保存成功",type:"success",duration:1e3,onClose:function(){n.getPage(),n.getTree()}}):n.$message({type:"info",message:"失败！"+e.data.message})}))}))},search:function(){this.pagingModel.currentPage=1,this.getPage()},resetForm:function(e){this.$refs[e].resetFields()},handleSelectionChange:function(e){this.multipleSelection=e},getObjectDataById:function(e){var t=e.permissionId;this.searchModel.parentId=t,this.getPage(),this.getPath()},onLinkObjectData:function(e){this.searchModel.parentId=e,this.searchModel.permissionName="",this.getPage(),this.getPath()},filterNode:function(e,t){return!e||-1!==t.permissionName.indexOf(e)},handleNodeClick:function(e){this.onLinkObjectData(e.permissionId)},handleItemChange:function(){}},watch:{pagingModel:{deep:!0,handler:function(){this.getPage()}},filterText:function(e){this.$refs.tree.filter(e)},addOrModDialogFormVisible:function(){this.searchModel.clientCategorys.length>0&&(this.entityModel.clientCategorys=this.searchModel.clientCategorys,this.entityModel.clientCategory=this.searchModel.clientCategorys[0].value),this.searchModel.dataStates.length>0&&(this.entityModel.dataStates=this.searchModel.dataStates,this.entityModel.dataState=this.searchModel.dataStates[0].value)}}},c=r,d=(a("e7fb"),a("2877")),u=Object(d["a"])(c,n,o,!1,null,"6e39f0d9",null);t["default"]=u.exports},"11e9":function(e,t,a){var n=a("52a7"),o=a("4630"),i=a("6821"),s=a("6a99"),l=a("69a8"),r=a("c69a"),c=Object.getOwnPropertyDescriptor;t.f=a("9e1e")?c:function(e,t){if(e=i(e),t=s(t,!0),r)try{return c(e,t)}catch(a){}if(l(e,t))return o(!n.f.call(e,t),e[t])}},"3b2b":function(e,t,a){var n=a("7726"),o=a("5dbc"),i=a("86cc").f,s=a("9093").f,l=a("aae3"),r=a("0bfb"),c=n.RegExp,d=c,u=c.prototype,p=/a/g,h=/a/g,g=new c(p)!==p;if(a("9e1e")&&(!g||a("79e5")((function(){return h[a("2b4c")("match")]=!1,c(p)!=p||c(h)==h||"/a/i"!=c(p,"i")})))){c=function(e,t){var a=this instanceof c,n=l(e),i=void 0===t;return!a&&n&&e.constructor===c&&i?e:o(g?new d(n&&!i?e.source:e,t):d((n=e instanceof c)?e.source:e,n&&i?r.call(e):t),a?this:u,c)};for(var m=function(e){e in c||i(c,e,{configurable:!0,get:function(){return d[e]},set:function(t){d[e]=t}})},f=s(d),y=0;f.length>y;)m(f[y++]);u.constructor=c,c.prototype=u,a("2aba")(n,"RegExp",c)}a("7a56")("RegExp")},"5dbc":function(e,t,a){var n=a("d3f4"),o=a("8b97").set;e.exports=function(e,t,a){var i,s=t.constructor;return s!==a&&"function"==typeof s&&(i=s.prototype)!==a.prototype&&n(i)&&o&&o(e,i),e}},8206:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={currentPage:1,pageSizes:[5,10,15,20,50],pageSize:10,pagerCount:5,total:100}},"8b97":function(e,t,a){var n=a("d3f4"),o=a("cb7c"),i=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,a){return i(e,a),t?e.__proto__=a:n(e,a),e}}({},!1):void 0),check:i}},9093:function(e,t,a){var n=a("ce10"),o=a("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},a011:function(e,t,a){},cc86:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("3b2b"),a("a481");var n=function(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,o=t.getDate()<10?"0"+t.getDate():t.getDate(),i=t.getHours()<10?"0"+t.getHours():t.getHours(),s=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),l=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return a+"-"+n+"-"+o+" "+i+":"+s+":"+l}},e7fb:function(e,t,a){"use strict";var n=a("a011"),o=a.n(n);o.a}}]);
//# sourceMappingURL=chunk-5e890608.487506e1.js.map